{% extends 'base.html' %}

{% block title %}Add New Recipe - Easy Cooking{% endblock %}

{% block content %}
<form action="{{ url_for('add_new_recipe') }}" method="post" class="pure-form pure-form-stacked">
    <fieldset>
        <legend><b>Add a new recipe</b></legend>
        <div class="pure-g">
            <div class="pure-u-1 pure-u-md-1-2 breaker">
                <label for="stacked-name"><b>Recipe Name</b></label>
                <input class="pure-u-1-4" type="text" id="stacked-name" name="recipe_name" required placeholder="Recipe Name" />
            </div>

            <div class="pure-u-1 pure-u-md-1-2 breaker">
                <label for="stacked-author"><b>Author</b></label>
                <input type="text" id="stacked-author" name="author" value="{{session.userinfo.name}}" readonly>
            </div>

            <div class="pure-u-1 pure-u-md-1-2 breaker">
                <label for="stacked-image"><b>Image Link</b></label>
                <input class="pure-u-1-4" type="text" id="stacked-image" name="recipe_image" placeholder="Enter Image Link. Optional." />
            </div>

            <div class="pure-u-1 pure-u-md-1-2 breaker">
                <label for="stacked-video"><b>Recipe Video</b></label>
                <input class="pure-u-1-4" type="text" id="stacked-video" name="recipe_video" placeholder="Enter Video Link. Optional." />
            </div>

            <div class="pure-u-1">
                <div id="input-group-item" class="pure-u-1-2 input-group-item breaker">
                    <div class="pure-u-1 pure-u-md-1-3 ">
                        <label for="stacked-category"><b>Category</b></label>
                        <select name="stacked-category">
                            <option selected disabled>Choose a category</option>
                            <option value="Chinese">Chinese</option>
                            <option value="Japanese">Japanese</option>
                            <option value="Korean">Korean</option>
                            <option value="Vietnamese">Vietnamese</option>
                            <option value="Thai">Thai</option>
                            <option value="American">American</option>
                            <option value="Mexican">Mexican</option>
                            <option value="Italian">Italian</option>
                            <option value="England">England</option>
                            <option value="Spanish">Spanish</option>
                        </select>
                    </div>
        
                    <div class="pure-u-1 pure-u-md-1-3">
                        <label for="stacked-spiciness"><b>Spiciness</b></label>
                        <select name="stacked-spiciness">
                            <option selected disabled>Choose Spiciness</option>
                            <option value="None">None</option>
                            <option value="Mild">Mild</option>
                            <option value="Medium">Medium</option>
                            <option value="Hot">Hot</option>
                            <option value="Extra_Hot">Extra Hot</option>
                            <option value="Extreme_Hot">Extreme Hot</option>
                        </select>
                    </div>
        
                    <div class="pure-u-1 pure-u-md-1-3">
                        <label for="stacked-difficulty"><b>Difficulty</b></label>
                        <select name="stacked-difficulty">
                            <option selected disabled>Choose Difficulty</option>
                            <option value="Easy">Easy</option>
                            <option value="Medium">Medium</option>
                            <option value="Hard">Hard</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="input-group-item" class="pure-u-1-2 input-group-item breaker">
                <div class="pure-u-1 pure-u-md-1-3">
                    <label for="checkbox-nut" class="pure-checkbox">
                        <input type="checkbox" name="nut" id="checkbox-nut" /> Nut free
                    </label>
                </div>
    
                <div class="pure-u-1 pure-u-md-1-3">
                    <label for="checkbox-dairy" class="pure-checkbox">
                        <input type="checkbox" name="dairy" id="checkbox-dairy"/> Dairy free
                    </label>
                </div>
    
                <div class="pure-u-1 pure-u-md-1-3">
                    <label for="checkbox-vegetarian" class="pure-checkbox">
                        <input type="checkbox" name="vegetarian" id="checkbox-vegetarian"/> Vegetarian
                    </label>
                </div>
            </div>
            

            <div class="pure-u-1 pure-u-md-1-2 breaker">
                <label for="stacked-description"><b>Description</b></label>
                <textarea class="pure-u-3-5" id="stacked-description" name="description" placeholder="Recipe Description. Optional."></textarea>
            </div>
            
            <div class="pure-u-1">
                <div id="input-group-item" class="pure-u-1-2 input-group-item breaker">
                    <div class="pure-u-1 pure-u-md-1-3">
                        <label for="stacked-ingredients"><b>Ingredients</b></label>
                        <div id="ingredients-list" class="stacked-ingredients">
                            <div class="ingredient-container">
                                <input type="text" placeholder="Enter ingredient" name="ingredients[]">
                            </div>
                        </div>
                    </div>
    
                    <div class="pure-u-1 pure-u-md-1-3">
                        <label for="stacked-quantity"><b>Quantity</b></label>
                        <div id="quantity-list" class="stacked-quantity">
                            <div class="quantity-container">
                                <input type="text" placeholder="e.g. 10, 20, 300" name="quantity[]">
                            </div>
                        </div>
                    </div>
    
                    <div class="pure-u-1 pure-u-md-1-3">
                        <label for="stacked-measurement"><b>Measurement</b></label>
                        <div id="measurement-list" class="stacked-measurement">
                            <div class="measurement-container">
                                <!-- <input type="text" placeholder="e.g. g, oz" name="measurement[]"> -->
                                <select name="measurement[]">
                                    <option selected disabled>Choose Measurement. Select blank if not sure.</option>
                                    <option value="cup">cup</option>
                                    <option value="oz">oz</option>
                                    <option value="ml">ml</option>
                                    <option value="gallons">gallons</option>
                                    <option value="tablespoons">tablespoons</option>
                                    <option value="g">g</option>
                                    <option value="lb">lb</option>
                                    <option value=" "> </option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            

            <div class="pure-u-1 pure-u-md-1-2 breaker2">
                <button type="button" id="add-ingredient" class="pure-button pure-button-primary">Add</button>
                <button type="button" id="delete-ingredient" class="pure-button pure-button-primary delete-btn">Delete</button>
            </div>

            <div class="pure-u-1 pure-u-md-1-2 breaker">
                <label for="stacked-instructions"><b>Instructions</b></label>
                <div id="instructions-list" class="stacked-instructions">
                    <div class="instruction-container">
                        <input type="text" class="pure-input-2-3" placeholder="Enter instruciton" name="instructions[]">
                    </div>
                </div>
            </div>
            
            <div class="pure-u-1 pure-u-md-1-2">
                <button type="button" id="add-instruction" class="pure-button pure-button-primary">Add</button>
                <button type="button" id="delete-instruction" class="pure-button pure-button-primary delete-btn">Delete</button>
            </div>

            <button type="submit" class="upload pure-button pure-button-primary">Upload</button>
        </div>
    </fieldset>
</form>

<script>
    document.getElementById('add-ingredient').addEventListener('click', function() {
        var ingredientsList = document.getElementById('ingredients-list');
        var quantityList = document.getElementById('quantity-list');
        var measurementList = document.getElementById('measurement-list');

        var newIngredient = document.createElement('div');
        newIngredient.classList.add('ingredient-container');
        newIngredient.innerHTML = '<input type="text" placeholder="Enter ingredient" name="ingredients[]">';
        ingredientsList.appendChild(newIngredient);

        var newQuantity = document.createElement('div');
        newQuantity.classList.add('quantity-container');
        newQuantity.innerHTML = '<input type="text" placeholder="e.g. 10, 20, 300" name="quantity[]">';
        quantityList.appendChild(newQuantity);

        var newMeasurement = document.createElement('div');
        newMeasurement.classList.add('measurement-container');
        newMeasurement.innerHTML = 
                            `
                            <select name="measurement[]">
                                <option selected disabled>Choose Measurement. Select blank if not sure.</option>
                                <option value="cup">cup</option>
                                <option value="oz">oz</option>
                                <option value="ml">ml</option>
                                <option value="gallons">gallons</option>
                                <option value="tablespoons">tablespoons</option>
                                <option value="g">g</option>
                                <option value="lb">lb</option>
                                <option value=" "> </option>
                            </select>
                            `
        measurementList.appendChild(newMeasurement);
    });

    document.getElementById('delete-ingredient').addEventListener('click', function() {
        var ingredientsList = document.getElementById('ingredients-list');
        var lastIngredient = ingredientsList.lastElementChild;
        if (lastIngredient) {
            ingredientsList.removeChild(lastIngredient);
        }

        var quantityList = document.getElementById('quantity-list');
        var lastQuantity = quantityList.lastElementChild;
        if (lastQuantity) {
            quantityList.removeChild(lastQuantity);
        }

        var measurementList = document.getElementById('measurement-list');
        var lastMeasurement = measurementList.lastElementChild;
        if (lastMeasurement) {
            measurementList.removeChild(lastMeasurement);
        }
    });

    document.getElementById('add-instruction').addEventListener('click', function() {
        var instructionsList = document.getElementById('instructions-list');
        var newInstruction = document.createElement('div');
        newInstruction.classList.add('instruction-container');
        newInstruction.innerHTML = '<input type="text" class="pure-input-2-3" placeholder="Enter instruction" name="instructions[]">';
        instructionsList.appendChild(newInstruction);
    });

    document.getElementById('delete-instruction').addEventListener('click', function() {
        var instructionsList = document.getElementById('instructions-list');
        var lastInstruction = instructionsList.lastElementChild;
        if (lastInstruction) {
            instructionsList.removeChild(lastInstruction);
        }
    });
</script>

{% endblock %}

